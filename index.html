<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="刘立岗, 博客" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="开发笔记而已～～～">
<meta property="og:type" content="website">
<meta property="og:title" content="无来">
<meta property="og:url" content="http://www.wulai.me/index.html">
<meta property="og:site_name" content="无来">
<meta property="og:description" content="开发笔记而已～～～">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="无来">
<meta name="twitter:description" content="开发笔记而已～～～">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.wulai.me/"/>





  <title> 无来 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-81208215-1', 'auto');
  ga('send', 'pageview');
</script>









  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">无来</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">不管你来还是不来<br />我都在这里，夜夜点亮<br />不是为了守候<br />只是为了做好我自己</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://www.wulai.me/2017/12/27/CentOS中修改系统默认语言/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Hillock">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="https://avatars2.githubusercontent.com/u/3354580?v=3&s=460">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="无来">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="无来" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/12/27/CentOS中修改系统默认语言/" itemprop="url">
                  CentOS中修改系统默认语言
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-12-27T13:24:41+08:00">
              2017-12-27
            </time>

            &nbsp;|&nbsp;

            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-check-o"></i>
            </span>
            <time title="Post modified" itemprop="dateModified" datetime="2017-12-27T13:27:06+08:00">
              2017-12-27
            </time>
            
          </span>

          

          
            
          

          

          
          

          
          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script src="/assets/js/APlayer.min.js"> </script><p>操作系统安装时选择了中文字符，导致命令行下的错误提示信息也显示中文。这样无法在google上搜索到相对应的解决方法。所以需要临时修改提示信息为英文</p>
<pre><code>#export LANG=&quot;en_US.UTF-8&quot;
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://www.wulai.me/2017/12/20/centos-6-5-把光盘设置为本地yum源/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Hillock">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="https://avatars2.githubusercontent.com/u/3354580?v=3&s=460">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="无来">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="无来" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/12/20/centos-6-5-把光盘设置为本地yum源/" itemprop="url">
                  centos 6.5 把光盘设置为本地yum源
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-12-20T11:52:13+08:00">
              2017-12-20
            </time>

            &nbsp;|&nbsp;

            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-check-o"></i>
            </span>
            <time title="Post modified" itemprop="dateModified" datetime="2017-12-20T11:58:18+08:00">
              2017-12-20
            </time>
            
          </span>

          

          
            
          

          

          
          

          
          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script src="/assets/js/APlayer.min.js"> </script><p>为了搞学习内核编译，需要安装一些开发工具包，索性把光盘镜像设置成本地yum源，这样更快些！以下是一些基本步骤：</p>
<ul>
<li><p>1、 首先挂载光盘到/mnt/cd下，<code>mount  /dev/cdrom  /mnt/cd</code>，这个就不多说了；</p>
</li>
<li><p>2、 进入<code>`/etc/yum.repos.d/</code> `目录下，把原来的yum源备份，我给它重新命名了。</p>
<pre><code>mv CentOS-Vault.repo CentOS-Vault.repo.bak
mv CentOS-Debuginfo.repo CentOS-Debuginfo.repo.bak
mv CentOS-Base.repo CentOS-Base.repo.bak
</code></pre></li>
</ul>
<ul>
<li>3、新建一个光盘源</li>
</ul>
<p><code>vim  CentOS-Media.repo</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># CentOS-Media.repo</span><br><span class="line">#</span><br><span class="line">#  This repo can be used with mounted DVD media, verify the mount point for</span><br><span class="line">#  CentOS-6.  You can use this repo and yum to install items directly off the</span><br><span class="line">#  DVD ISO that we release.</span><br><span class="line">#</span><br><span class="line"># To use this repo, put in your DVD and use it with the other repos too:</span><br><span class="line">#  yum --enablerepo=c6-media [command]</span><br><span class="line">#  </span><br><span class="line"># or for ONLY the media repo, do this:</span><br><span class="line">#</span><br><span class="line">#  yum --disablerepo=\* --enablerepo=c6-media [command]</span><br><span class="line"></span><br><span class="line">[c6-media]</span><br><span class="line">name=CentOS-$releasever - Media</span><br><span class="line">baseurl=file:///mnt/cd</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6</span><br></pre></td></tr></table></figure>
<p>保存退出</p>
<ul>
<li><p>4、<code>yum clean all</code> (清除缓存)</p>
</li>
<li><p>5、<code>yum  makecache</code> (建立新缓存)</p>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://www.wulai.me/2017/12/11/带你去探险/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Hillock">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="https://avatars2.githubusercontent.com/u/3354580?v=3&s=460">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="无来">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="无来" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/12/11/带你去探险/" itemprop="url">
                  带你去探险
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-12-11T15:56:33+08:00">
              2017-12-11
            </time>

            &nbsp;|&nbsp;

            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-check-o"></i>
            </span>
            <time title="Post modified" itemprop="dateModified" datetime="2017-12-12T09:33:52+08:00">
              2017-12-12
            </time>
            
          </span>

          

          
            
          

          

          
          

          
          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script src="/assets/js/APlayer.min.js"> </script><div id="aplayer0" class="aplayer" style="margin-bottom: 20px;"></div>
		<script>
			var ap = new APlayer({
				element: document.getElementById("aplayer0"),
				narrow: false,
				autoplay: true,
				showlrc: 0,
				music: {
					title: "带你去探险",
					author: "可乐",
					url: "http://res.hillock.com.cn/take%20you%20to%20the%20beautiful%20place.mp3",
					pic: "https://avatars2.githubusercontent.com/u/3354580?v=3&s=460",
				}
			});
			window.aplayers || (window.aplayers = []);
			window.aplayers.push(ap);
		</script>
<h4 id="带你去探险"><a href="#带你去探险" class="headerlink" title="带你去探险"></a>带你去探险</h4><p>刘笑嫣（可乐）</p>
<pre><code>过来吧，我要带你去个美丽的地方！
美丽的地方是树吗？
对，咱们去树里逛一逛！
不用怕，不用怕！
我会陪在你身边，一直等你长大！

过来吧，我要带你去个美丽的地方！
美丽的地方是花吗？
对，我要带你去欣赏花的美丽。
花蜜多么美味呀，甜甜的！
不用怕，不用怕！
我会陪在你身边，一直等你长大！

过来吧，我要带你去个美丽的地方！
美丽的地方是外面吗？
对，我要带你去外面的世界逛一逛！
那是一个多么美丽的地方呀，你也一定会很喜欢哒！
不用怕，不用怕！
我会陪在你身边，一直等你长大！
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://www.wulai.me/2017/12/05/mysql-select-into-outfile-语法-乱码问题/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Hillock">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="https://avatars2.githubusercontent.com/u/3354580?v=3&s=460">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="无来">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="无来" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/12/05/mysql-select-into-outfile-语法-乱码问题/" itemprop="url">
                  mysql select into outfile 语法 乱码问题
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-12-05T12:53:58+08:00">
              2017-12-05
            </time>

            &nbsp;|&nbsp;

            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-check-o"></i>
            </span>
            <time title="Post modified" itemprop="dateModified" datetime="2017-12-05T12:55:33+08:00">
              2017-12-05
            </time>
            
          </span>

          

          
            
          

          

          
          

          
          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script src="/assets/js/APlayer.min.js"> </script><p>一个常见的问题，mysql 导出csv格式的语法，已经乱码问题：<br>由于数据库一般默认的是UTF-8 格式的字符集，而execl默认的是gbk格式的字符集，这里有两种方法解决乱码：</p>
<h4 id="方法一：-先转出-txt格式的文件，然后选择用excel打开时，提示选择哪种编码打开，选择gbk即可"><a href="#方法一：-先转出-txt格式的文件，然后选择用excel打开时，提示选择哪种编码打开，选择gbk即可" class="headerlink" title="方法一： 先转出.txt格式的文件，然后选择用excel打开时，提示选择哪种编码打开，选择gbk即可"></a>方法一： 先转出.txt格式的文件，然后选择用excel打开时，提示选择哪种编码打开，选择gbk即可</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from mobile_order_region where school_id=6921 into outfile &apos;/tmp/6921.txt&apos;</span><br></pre></td></tr></table></figure>
<h4 id="方法二：导出时直接设置字符集格式："><a href="#方法二：导出时直接设置字符集格式：" class="headerlink" title="方法二：导出时直接设置字符集格式："></a>方法二：导出时直接设置字符集格式：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from mobile_order_region where school_id=6921 into outfile &apos;/tmp/6921.csv&apos;</span><br><span class="line">CHARACTER SET gbk</span><br><span class="line">FIELDS TERMINATED BY &apos;,&apos;</span><br><span class="line">OPTIONALLY ENCLOSED BY &apos;&quot;&apos;</span><br><span class="line"> LINES TERMINATED BY &apos;\n&apos;;</span><br><span class="line">Query OK, 6888 rows affected (0.11 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; \q</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://www.wulai.me/2017/09/27/MySQL-字符串拼接/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Hillock">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="https://avatars2.githubusercontent.com/u/3354580?v=3&s=460">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="无来">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="无来" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/09/27/MySQL-字符串拼接/" itemprop="url">
                  MySQL 字符串拼接
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-09-27T10:43:00+08:00">
              2017-09-27
            </time>

            &nbsp;|&nbsp;

            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-check-o"></i>
            </span>
            <time title="Post modified" itemprop="dateModified" datetime="2017-09-27T10:46:24+08:00">
              2017-09-27
            </time>
            
          </span>

          

          
            
          

          

          
          

          
          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script src="/assets/js/APlayer.min.js"> </script><p>在Mysql 数据库中存在两种字符串连接操作.具体操作如下</p>
<p>一. 语法:</p>
<ol>
<li><p>CONCAT(string1,string2,…)   说明 : string1,string2代表字符串,concat函数在连接字符串的时候，只要其中一个是NULL,那么将返回NULL</p>
<p>例1:</p>
</li>
</ol>
<p>   例2:</p>
<ol>
<li><p>CONCAT_WS(separator,str1,str2,…)</p>
<p>说明 : string1,string2代表字符串,concat_ws 代表 concat with separator,第一个参数是其它参数的分隔符。分隔符的位置放在要连接的两个字符串之间。分隔符可以是一个字符串，也可以是其它参数。如果分隔符为 NULL，则结果为 NULL。函数会忽略任何分隔符参数后的 NULL 值。</p>
<p>举例1:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">   mysql&gt; select concat_ws(&apos;#&apos;,&apos;dbdh=&apos;,&apos;NorthEastTrcoon&apos;,null) AS dbdh_name_three;</span><br><span class="line">+-----------------------+</span><br><span class="line">| dbdh_name_three       |</span><br><span class="line">+-----------------------+</span><br><span class="line">| dbdh=#NorthEastTrcoon |</span><br><span class="line">+-----------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>例2:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select concat_ws(null,&apos;dbdh=&apos;,&apos;NorthEastTrcoon&apos;,null) AS dbdh_name_fourth</span><br><span class="line">;</span><br><span class="line">+------------------+</span><br><span class="line">| dbdh_name_fourth |</span><br><span class="line">+------------------+</span><br><span class="line">| NULL             |</span><br><span class="line">+------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>例3:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">     mysql&gt; select concat_ws(&apos;*&apos;,&apos;dbdh=&apos;,&apos;NorthEastTrcoon&apos;,null) AS dbdh_name_fifth;</span><br><span class="line">+-----------------------+</span><br><span class="line">| dbdh_name_fifth       |</span><br><span class="line">+-----------------------+</span><br><span class="line">| dbdh=*NorthEastTrcoon |</span><br><span class="line">+-----------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li>MySQL中group_concat函数<br>完整的语法如下：<br> group_concat([DISTINCT] 要连接的字段 [Order BY ASC/DESC 排序字段] [Separator ‘分隔符’])</li>
</ol>
<p>基本查询</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from stu1;</span><br><span class="line">+------+------+</span><br><span class="line">| id| name |</span><br><span class="line">+------+------+</span><br><span class="line">|1 | 10|</span><br><span class="line">|1 | 20|</span><br><span class="line">|1 | 20|</span><br><span class="line">|2 | 20|</span><br><span class="line">|3 | 200   |</span><br><span class="line">|3 | 500   |</span><br><span class="line">+------+------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>以id分组，把name字段的值打印在一行，逗号分隔(默认)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select id,group_concat(name) from aa group by id;</span><br><span class="line">+------+--------------------+</span><br><span class="line">| id| group_concat(name) |</span><br><span class="line">+------+--------------------+</span><br><span class="line">|1 | 10,20,20|</span><br><span class="line">|2 | 20 |</span><br><span class="line">|3 | 200,500|</span><br><span class="line">+------+--------------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>以id分组，把name字段的值打印在一行，分号分隔</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select id,group_concat(name separator &apos;;&apos;) from aa group by id;</span><br><span class="line">+------+----------------------------------+</span><br><span class="line">| id| group_concat(name separator &apos;;&apos;) |</span><br><span class="line">+------+----------------------------------+</span><br><span class="line">|1 | 10;20;20 |</span><br><span class="line">|2 | 20|</span><br><span class="line">|3 | 200;500   |</span><br><span class="line">+------+----------------------------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>以id分组，把去冗余的name字段的值打印在一行，</p>
<p>逗号分隔</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select id,group_concat(distinct name) from aa group by id;</span><br><span class="line">+------+-----------------------------+</span><br><span class="line">| id| group_concat(distinct name) |</span><br><span class="line">+------+-----------------------------+</span><br><span class="line">|1 | 10,20|</span><br><span class="line">|2 | 20   |</span><br><span class="line">|3 | 200,500 |</span><br><span class="line">+------+-----------------------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>以id分组，把name字段的值打印在一行，逗号分隔，以name排倒序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select id,group_concat(name order by name desc) from aa group by id;</span><br><span class="line">+------+---------------------------------------+</span><br><span class="line">| id| group_concat(name order by name desc) |</span><br><span class="line">+------+---------------------------------------+</span><br><span class="line">|1 | 20,20,10   |</span><br><span class="line">|2 | 20|</span><br><span class="line">|3 | 500,200|</span><br><span class="line">+------+---------------------------------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>还有一个简单的连接方式为: ||</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select *  from student;</span><br><span class="line">+----+------+-------+----------+------------+</span><br><span class="line">| id | age  | score | name     | birth      |</span><br><span class="line">+----+------+-------+----------+------------+</span><br><span class="line">|  1 |   23 |    78 | 李四     | 2017-10-10 |</span><br><span class="line">|  2 |   24 |    78 | zhangsan | 2017-10-10 |</span><br><span class="line">|  3 |   25 |    99 | 王五     | 2016-05-17 |</span><br><span class="line">+----+------+-------+----------+------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select id+999,name,name+99,name+&apos;999&apos; from student;</span><br><span class="line">+--------+----------+---------+------------+</span><br><span class="line">| id+999 | name     | name+99 | name+&apos;999&apos; |</span><br><span class="line">+--------+----------+---------+------------+</span><br><span class="line">|   1000 | 李四     |      99 |        999 |</span><br><span class="line">|   1001 | zhangsan |      99 |        999 |</span><br><span class="line">|   1002 | 王五     |      99 |        999 |</span><br><span class="line">+--------+----------+---------+------------+</span><br><span class="line">3 rows in set, 6 warnings (0.00 sec)</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://www.wulai.me/2017/09/14/LNMP的并发与资源分配/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Hillock">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="https://avatars2.githubusercontent.com/u/3354580?v=3&s=460">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="无来">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="无来" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/09/14/LNMP的并发与资源分配/" itemprop="url">
                  LNMP的并发与资源分配
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-09-14T11:01:35+08:00">
              2017-09-14
            </time>

            &nbsp;|&nbsp;

            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-check-o"></i>
            </span>
            <time title="Post modified" itemprop="dateModified" datetime="2017-09-14T11:48:25+08:00">
              2017-09-14
            </time>
            
          </span>

          

          
            
          

          

          
          

          
          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script src="/assets/js/APlayer.min.js"> </script><h1 id="0-写作背景"><a href="#0-写作背景" class="headerlink" title="0. 写作背景"></a>0. 写作背景</h1><p>好久没有写博客了，前端时间来了一场说走就走的旅行，和爱人一起辞职，去云南玩了半个月，才刚回来，最近一段时间在找工作，没事就上网看看技术相关的文章，充充电，昨天偶尔发现一遍讲解LNMP的并发与资源分配的文章，感觉不错，和大家分享下。<br>很多时候面试官都会问你，你们的程序性能如何？程序的并发可以达到多少？程序的瓶颈在哪儿？为了满足业务需求应该购买多少台服务器？负载均衡中php应用服务器需要多少台？<br>可能这些问题在面试中会设置一个应用的场景及一些前提条件，让面试的人去设计，并提出看法建议，能够回答得很好的人还是比较少的。</p>
<h1 id="1-概念"><a href="#1-概念" class="headerlink" title="1. 概念"></a>1. 概念</h1><h2 id="1-1-LNMP中的N是nginx充当Web-Server"><a href="#1-1-LNMP中的N是nginx充当Web-Server" class="headerlink" title="1.1 LNMP中的N是nginx充当Web Server"></a>1.1 LNMP中的N是nginx充当Web Server</h2><p>内容的分发者，会在文件系统找到相应的文件，就返回给浏览器，如：nginx。如果是静态的文件，就可以直接返回，但是如果是index.php需要解析并执行的脚本文件时，Web Server就无力了，需要将请求转发给相应的脚本语言的解析器来解释并执行，最终将程序的执行结果，返回给Web Server，再返回给浏览器。</p>
<h2 id="1-2-LNMP中的P是php充当后端的逻辑处理程序"><a href="#1-2-LNMP中的P是php充当后端的逻辑处理程序" class="headerlink" title="1.2 LNMP中的P是php充当后端的逻辑处理程序"></a>1.2 LNMP中的P是php充当后端的逻辑处理程序</h2><p>那么php与nginx的常规协作方式是如何的呢？需要我们明确几个概念</p>
<h2 id="1-3-cgi"><a href="#1-3-cgi" class="headerlink" title="1.3 cgi"></a>1.3 cgi</h2><p>通用网关接口，是HTTP协议中描述的，Web Server与后端处理程序进程间通信的协议</p>
<h2 id="1-4-php-cgi"><a href="#1-4-php-cgi" class="headerlink" title="1.4 php-cgi"></a>1.4 php-cgi</h2><p>php实现了cgi协议，使得web server与php共同完成一个动态网页的请求响应</p>
<h2 id="1-5-fastcgi"><a href="#1-5-fastcgi" class="headerlink" title="1.5 fastcgi"></a>1.5 fastcgi</h2><p>是为了解决cgi性能问题，而规范的另外一种协议，为什么说解决cgi性能问题，因为在面对各大中型网站的业务需求中，cgi程序表现得越来越无力，因为cgi程序在每次接收到请求时都需要启动新的进程，并初始化环境，然后执行程序，具体的协议内容，在此不引述。</p>
<h2 id="1-6-php-fpm"><a href="#1-6-php-fpm" class="headerlink" title="1.6 php-fpm"></a>1.6 php-fpm</h2><p>实现了fastcgi协议，是php-cgi的进程管理器，解决高并发网站的性能问题。<br>在最终回答LNMP的并发考虑与资源分配还需要明确的几个概念</p>
<h2 id="1-7-并发"><a href="#1-7-并发" class="headerlink" title="1.7 并发"></a>1.7 并发</h2><p>一般由单位内完成的请求数来衡量，如，每秒事务数（TPS），每秒HTTP请求数（HPS），每秒查询数（QPS）。通常情况下，我们说PHP的并发，都是指一秒内PHP完成的动态请求的次数。如某网站高峰期的动态请求并发为5000每秒，这个数字不算太高，但也不低。一般日活跃用户数在1000万-5000万的网站应用才能达到这个级别。</p>
<h2 id="1-8-性能"><a href="#1-8-性能" class="headerlink" title="1.8 性能"></a>1.8 性能</h2><p>一般是指应用程序的处理速度，如果php的应用程序，打开一个页面（执行一个脚本程序）通常需要在50-100ms完成，这对程序的性能要求还是比较高的。但是这还仅仅只是程序处理，php处理完成之后，还要交给web server，web server再将数据返回浏览器，这中间会有一个网络延迟，通常网络正常的情况下，需要大约100ms，最终一个动态网页的请求大约200ms（理想的情况下）可以到达用户浏览器端（仅仅是一个html结构）。</p>
<h1 id="2-资源分配"><a href="#2-资源分配" class="headerlink" title="2.资源分配"></a>2.资源分配</h1><h2 id="2-1-php-fpm进程数"><a href="#2-1-php-fpm进程数" class="headerlink" title="2.1 php-fpm进程数"></a>2.1 php-fpm进程数</h2><p>按照上面的描述，并发为5000每秒，每个请求完成大约200ms（具体页面要具体分析，这里只是一个理想值），如果只有5台PHP应用程序服务器，那么每台机器平均为并发1000每秒，如果是使用nginx+php-fpm的架构，php-fpm的php-cgi进程管理器的配置应该如何呢？我计算的结果为（具体的配置项说明在后文）：</p>
<ul>
<li>pm=static</li>
<li>pm.max_children=100<br>上面的100是如何得来的，由于机器平均并发为1000每秒，每个动态请求的处理时间为100ms，也就是说1个php-fpm的worker处理进程在1秒内可以处理10个请求，100个php-fpm的worker处理进程，就可以处理1000个请求。<br>当然需要结合服务器硬件资源来进行配置，如果配置不当，很容易在请求高峰期或者流量猛增导致服务器宕机。</li>
</ul>
<h2 id="2-2-网络带宽"><a href="#2-2-网络带宽" class="headerlink" title="2.2 网络带宽"></a>2.2 网络带宽</h2><p>网络带宽也会是一个重要的因素，如果你的服务处理很强，但是用户的请求和响应不能及时到达也是白忙活，这个参数如何计算呢？<br>并发5000每秒，每个请求的输出为20K，则5000x20K=100000K=100M<br>这就要求你的公网负载均衡器外网出口带宽至少要达到100M</p>
<h2 id="2-3-内存"><a href="#2-3-内存" class="headerlink" title="2.3 内存"></a>2.3 内存</h2><p>上述中100个php-fpm的worker处理进程，理论上如果服务器只运行php-fpm，那么我们可以将服务器内存的一半分配给php-fpm，通常情况下，我们可以认为一个php-fpm的worker处理进程占用内存20M，那么100x20M=2G，也就是说明服务器的内存大约为4G</p>
<h2 id="2-4-CPU"><a href="#2-4-CPU" class="headerlink" title="2.4 CPU"></a>2.4 CPU</h2><p>由于php-fpm是一个多进程的模型应用，CPU进程调度消耗也是很大的，并且PHP应用程序有问题也会导致CPU占用率高，这就没有量化的指标，需要具体情况具体分析了。但是有一个小建议，可以部署一个crontab每隔一分钟检测cpu占用率超过多少就kill掉相应的php-fpm的worker处理进程。</p>
<h2 id="2-5-php-fpm-Unix-Socket"><a href="#2-5-php-fpm-Unix-Socket" class="headerlink" title="2.5 php-fpm Unix Socket"></a>2.5 php-fpm Unix Socket</h2><p>如果nginx与php在同一台机器，nginx与php-fpm使用unix域套接字代替tcp socke进行通信，这个配置挺关键的，纯echo的ab测试，采用unix域套接字每秒请求数提升10%-20%</p>
<p>即nginx中配置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastcgi_pass unix:/data/server/var/php/php-fpm.sock;</span><br></pre></td></tr></table></figure></p>
<p>php-fpm.conf中配置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">listen = /data/server/var/php/php-fpm.sock</span><br></pre></td></tr></table></figure></p>
<p>最后遇到很多同学对php-fpm的进程管理器的核心配置不太了解，下面是我翻译的配置说明：</p>
<h1 id="3-php-fpm配置项"><a href="#3-php-fpm配置项" class="headerlink" title="3. php-fpm配置项"></a>3. php-fpm配置项</h1><h2 id="3-1-pm"><a href="#3-1-pm" class="headerlink" title="3.1 pm"></a>3.1 pm</h2><ul>
<li>static 一个固定的值，由pm.max_children指定</li>
<li>dynamic 动态的（工作方式和Apache的prefork模式一致），但是保持至少一个，由<ul>
<li>pm.max_children 在同一时间最大的进程数</li>
<li>pm.start_servers php-fpm启动时开启的等待请求到来的进程数</li>
<li>pm.min_spare_servers 在空闲状态下，运行的最小进程数，如果小于此值，会创建新的进程</li>
<li>pm.max_spare_servers 在空闲状态下，运行的最大进程数，如果大于此值，会kill部分进程</li>
<li>ondemand 启动时不会创建进程，当请求达到时创建子进程处理请求</li>
<li>pm.max_children 在同一时间最大的进程数</li>
<li>pm.process_idle_timeout 空闲多少秒之后进程会被kill</li>
</ul>
</li>
<li>pm = static</li>
</ul>
<h2 id="3-2-pm-max-children"><a href="#3-2-pm-max-children" class="headerlink" title="3.2 pm.max_children"></a>3.2 pm.max_children</h2><p>在同一时间最大的进程数</p>
<ul>
<li>pm.max_children = 120</li>
</ul>
<h2 id="3-3-pm-start-servers"><a href="#3-3-pm-start-servers" class="headerlink" title="3.3 pm.start_servers"></a>3.3 pm.start_servers</h2><p>php-fpm启动时开启的等待请求到来的进程数，默认值为：min_spare_servers + (max_spare_servers – min_spare_servers) / 2</p>
<ul>
<li>pm.start_servers = 80</li>
</ul>
<h2 id="3-4-pm-min-spare-servers"><a href="#3-4-pm-min-spare-servers" class="headerlink" title="3.4 pm.min_spare_servers"></a>3.4 pm.min_spare_servers</h2><p>在空闲状态下，运行的最小进程数，如果小于此值，会创建新的进程</p>
<ul>
<li>pm.min_spare_servers = 60</li>
</ul>
<h2 id="3-5-pm-max-spare-servers"><a href="#3-5-pm-max-spare-servers" class="headerlink" title="3.5 pm.max_spare_servers"></a>3.5 pm.max_spare_servers</h2><p>在空闲状态下，运行的最大进程数，如果大于此值，会kill部分进程</p>
<ul>
<li>pm.max_spare_servers = 120</li>
</ul>
<h2 id="3-6-pm-process-idle-timeout"><a href="#3-6-pm-process-idle-timeout" class="headerlink" title="3.6 pm.process_idle_timeout"></a>3.6 pm.process_idle_timeout</h2><p>空闲多少秒之后进程会被kill，默认为10s</p>
<ul>
<li>pm.process_idle_timeout = 10s</li>
</ul>
<h2 id="3-7-pm-max-requests"><a href="#3-7-pm-max-requests" class="headerlink" title="3.7 pm.max_requests"></a>3.7 pm.max_requests</h2><p>每个进程处理多少个请求之后自动终止，可以有效防止内存溢出，如果为0则不会自动终止，默认为0</p>
<ul>
<li>pm.max_requests = 5000</li>
</ul>
<h2 id="3-8-pm-status-path"><a href="#3-8-pm-status-path" class="headerlink" title="3.8 pm.status_path"></a>3.8 pm.status_path</h2><p>注册的URI，以展示php-fpm状态的统计信息</p>
<ul>
<li>pm.status_path = /status<br>其中统计页面信息有：<ul>
<li>pool 进程池名称</li>
<li>process manager 进程管理器名称（static, dynamic or ondemand）</li>
<li>start time php-fpm启动时间</li>
<li>start since php-fpm启动的总秒数</li>
<li>accepted conn 当前进程池接收的请求数</li>
<li>listen queue 等待队列的请求数</li>
<li>max listen queue 自启动以来等待队列中最大的请求数</li>
<li>listen queue len 等待连接socket队列大小</li>
<li>idle processes 当前空闲的进程数</li>
<li>active processes 活动的进程数</li>
<li>total processes 总共的进程数（idle+active）</li>
<li>max active processes 自启动以来活动的进程数最大值</li>
<li>max children reached 达到最大进程数的次数</li>
</ul>
</li>
</ul>
<h2 id="3-9-ping-path"><a href="#3-9-ping-path" class="headerlink" title="3.9 ping.path"></a>3.9 ping.path</h2><p>ping url，可以用来测试php-fpm是否存活并可以响应</p>
<ul>
<li>ping.path = /ping</li>
</ul>
<h2 id="ping-response"><a href="#ping-response" class="headerlink" title="ping.response"></a>ping.response</h2><p>ping url的响应正文</p>
<ul>
<li>ping.response = pong</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://www.wulai.me/2017/08/08/CentOS-RHEL-Remove-Routes-169-254-0-0-255-255-0-0-From-the-System/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Hillock">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="https://avatars2.githubusercontent.com/u/3354580?v=3&s=460">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="无来">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="无来" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/08/08/CentOS-RHEL-Remove-Routes-169-254-0-0-255-255-0-0-From-the-System/" itemprop="url">
                  CentOS / RHEL: Remove Routes 169.254.0.0 / 255.255.0.0 From the System
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-08-08T18:52:17+08:00">
              2017-08-08
            </time>

            &nbsp;|&nbsp;

            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-check-o"></i>
            </span>
            <time title="Post modified" itemprop="dateModified" datetime="2017-08-08T18:53:27+08:00">
              2017-08-08
            </time>
            
          </span>

          

          
            
          

          

          
          

          
          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script src="/assets/js/APlayer.min.js"> </script><p>zeroconf (Zero configuration networking), is a techniques that automatically creates a usable Internet Protocol (IP) network without manual operator intervention or special configuration servers. 169.254.0.0/255.255.0.0 route is part of zeroconf under RHEL 6 / CentOS 6 or older versions. To see current routing table, enter:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># route -n</span><br></pre></td></tr></table></figure></p>
<p>Sample outputs:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">74.8x.4y.zz     0.0.0.0         255.255.255.248 U     0      0        0 eth1</span><br><span class="line">10.10.29.64     0.0.0.0         255.255.255.192 U     0      0        0 eth0</span><br><span class="line">169.254.0.0     0.0.0.0         255.255.0.0     U     1002   0        0 eth0</span><br><span class="line">169.254.0.0     0.0.0.0         255.255.0.0     U     1003   0        0 eth1</span><br><span class="line">10.0.0.0        10.10.29.65     255.0.0.0       UG    0      0        0 eth0</span><br><span class="line">0.0.0.0         74.8x.yy.zz     0.0.0.0         UG    0      0        0 eth1</span><br></pre></td></tr></table></figure>
<p>Every time the server or Linux desktop boots, the zeroconf route 169.254.0.0 is enabled and added to the kernel routing table. To disable zeroconf route under RHEL / CentOS / Fedora Linux, enter:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># vi /etc/sysconfig/network</span><br></pre></td></tr></table></figure>
<p>Append the following directive:</p>
<p>NOZEROCONF=yes<br>Save and close the file. Reboot the system / server or restart the networking service:</p>
<h1 id="etc-init-d-network-restart"><a href="#etc-init-d-network-restart" class="headerlink" title="/etc/init.d/network restart"></a>/etc/init.d/network restart</h1><p>Verify routing table, enter:</p>
<h1 id="route-n"><a href="#route-n" class="headerlink" title="route -n"></a>route -n</h1><p>OR</p>
<h1 id="ip-route"><a href="#ip-route" class="headerlink" title="ip route"></a>ip route</h1>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://www.wulai.me/2017/08/08/How-to-Install-Oracle-VirtualBox-5-1-on-CentOS-RHEL-7-6-and-Fedora-25/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Hillock">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="https://avatars2.githubusercontent.com/u/3354580?v=3&s=460">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="无来">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="无来" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/08/08/How-to-Install-Oracle-VirtualBox-5-1-on-CentOS-RHEL-7-6-and-Fedora-25/" itemprop="url">
                  How to Install Oracle VirtualBox 5.1 on CentOS/RHEL 7/6 and Fedora 25
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-08-08T10:24:22+08:00">
              2017-08-08
            </time>

            &nbsp;|&nbsp;

            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-check-o"></i>
            </span>
            <time title="Post modified" itemprop="dateModified" datetime="2017-08-08T10:35:28+08:00">
              2017-08-08
            </time>
            
          </span>

          

          
            
          

          

          
          

          
          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script src="/assets/js/APlayer.min.js"> </script><p>Oracle VirtualBox is a cross-platform virtualization application. It installs on your existing Intel or AMD-based computers, whether they are running Windows, Mac, Linux or Solaris operating systems. It extends the capabilities of your existing computer so that it can run multiple operating systems at the same time. Click here to read more about VirtualBox</p>
<p>Oracle has released VirtualBox 5.1.14 maintenance release of VirtualBox 5.1 on January 17th, 2017. In this release VirtualBox has improves stability and fixes regressions. To read more about this release read changelog.</p>
<p>This article will help you to install Oracle VirtualBox 5.1 on CentOS, Redhat and Fedora systems using Yum.</p>
<h1 id="Step-1-–-Add-Required-Yum-Repositories"><a href="#Step-1-–-Add-Required-Yum-Repositories" class="headerlink" title="Step 1 – Add Required Yum Repositories"></a>Step 1 – Add Required Yum Repositories</h1><p>Firstly you are required to add VirtualBox yum repository in your system. Download repository file from its official site and place it under at <strong> /etc/yum.repos.d/virtualbox.repo </strong> .First navigate to <strong>/etc/yum.repos.d/</strong> directory and use one of below commands as per your operating system.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># cd /etc/yum.repos.d/</span><br><span class="line"></span><br><span class="line">For CentOS/RHEL Systems:</span><br><span class="line"># wget http://download.virtualbox.org/virtualbox/rpm/rhel/virtualbox.repo</span><br><span class="line"></span><br><span class="line">For Fedora Systems:</span><br><span class="line"># wget http://download.virtualbox.org/virtualbox/rpm/fedora/virtualbox.repo</span><br></pre></td></tr></table></figure></p>
<p><strong> CentOS/RHEL </strong> Users also need to add EPEL yum repository using one of the following commands.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CentOS/RHEL 7, 64 Bit (x86_64):</span><br><span class="line"># rpm -Uvh http://epel.mirror.net.in/epel/7/x86_64/e/epel-release-7-9.noarch.rpm</span><br><span class="line"></span><br><span class="line">CentOS/RHEL 6, 64 Bit (x86_64):</span><br><span class="line"># rpm -Uvh http://epel.mirror.net.in/epel/6/x86_64/epel-release-6-8.noarch.rpm</span><br></pre></td></tr></table></figure></p>
<h1 id="Step-2-–-Install-Required-Packages"><a href="#Step-2-–-Install-Required-Packages" class="headerlink" title="Step 2 – Install Required Packages"></a>Step 2 – Install Required Packages</h1><p>Before installing VirtualBox make sure to install all required packages to run VirtualBox like kernel-headers, kernel-devels etc. Use the following command to install required packages.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># yum install gcc make patch  dkms qt libgomp</span><br><span class="line"># yum install kernel-headers kernel-devel fontforge binutils glibc-headers glibc-devel</span><br></pre></td></tr></table></figure>
<h1 id="Step-3-–-Setup-Environment-Variable"><a href="#Step-3-–-Setup-Environment-Variable" class="headerlink" title="Step 3 – Setup Environment Variable"></a>Step 3 – Setup Environment Variable</h1><p>VirtualBox installation required kernel source code to install required modules, So we need to configure environment variable <strong> KERN_DIR </strong> to which VirtualBox get kernel source code. In my case latest kernel source is available in <strong> 2.6.32-504.3.3.el6.x86_64 </strong> directory under <strong> /usr/src/kernels/ </strong>. Make sure you are using correct source path.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># export KERN_DIR=/usr/src/kernels/2.6.32-504.3.3.el6.x86_64</span><br></pre></td></tr></table></figure></p>
<h1 id="Step-4-–-Install-Oracle-VirtualBox-and-Setup"><a href="#Step-4-–-Install-Oracle-VirtualBox-and-Setup" class="headerlink" title="Step 4 – Install Oracle VirtualBox and Setup"></a>Step 4 – Install Oracle VirtualBox and Setup</h1><p>Use the following command to install VirtualBox 5.1 using yum command line tool. It will install the latest version of VirtualBox 5.1.x on your system.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># yum install VirtualBox-5.1</span><br></pre></td></tr></table></figure></p>
<p>After installation, we need to rebuild kernel modules using the following command.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /usr/lib/virtualbox/vboxdrv.sh setup</span><br></pre></td></tr></table></figure></p>
<h1 id="Step-5-–-Start-VirtualBox"><a href="#Step-5-–-Start-VirtualBox" class="headerlink" title="Step 5 – Start VirtualBox"></a>Step 5 – Start VirtualBox</h1><p>Use following command to start VirtualBox from X windows. You can switch to GUI mode using <strong> init 5 </strong> or <strong> startx </strong> commands from terminal.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># virtualbox &amp;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://www.wulai.me/2017/08/07/在Mac-OS-X系统下-用dd命令将iso镜像写入u盘/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Hillock">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="https://avatars2.githubusercontent.com/u/3354580?v=3&s=460">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="无来">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="无来" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/08/07/在Mac-OS-X系统下-用dd命令将iso镜像写入u盘/" itemprop="url">
                  在Mac OS X系统下 用dd命令将iso镜像写入u盘
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-08-07T18:38:21+08:00">
              2017-08-07
            </time>

            &nbsp;|&nbsp;

            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-check-o"></i>
            </span>
            <time title="Post modified" itemprop="dateModified" datetime="2017-08-07T18:42:04+08:00">
              2017-08-07
            </time>
            
          </span>

          

          
            
          

          

          
          

          
          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script src="/assets/js/APlayer.min.js"> </script><h2 id="一、-Mac下将ISO写入U盘可使用命令行工具dd，操作如下："><a href="#一、-Mac下将ISO写入U盘可使用命令行工具dd，操作如下：" class="headerlink" title="一、 Mac下将ISO写入U盘可使用命令行工具dd，操作如下："></a>一、 Mac下将ISO写入U盘可使用命令行工具dd，操作如下：</h2><h3 id="1、找出U盘挂载的路径，使用如下命令：diskutil-list"><a href="#1、找出U盘挂载的路径，使用如下命令：diskutil-list" class="headerlink" title="1、找出U盘挂载的路径，使用如下命令：diskutil list"></a>1、找出U盘挂载的路径，使用如下命令：diskutil list</h3><h3 id="2、将U盘unmount（将N替换为挂载路径）：diskutil-unmountDisk-dev-disk-N"><a href="#2、将U盘unmount（将N替换为挂载路径）：diskutil-unmountDisk-dev-disk-N" class="headerlink" title="2、将U盘unmount（将N替换为挂载路径）：diskutil unmountDisk /dev/disk[N]"></a>2、将U盘unmount（将N替换为挂载路径）：diskutil unmountDisk /dev/disk[N]</h3><h3 id="3、写入U盘：sudo-dd-if-iso路径-of-dev-rdisk-N-bs-1m-rdisk-中加入r可以让写入速度加快"><a href="#3、写入U盘：sudo-dd-if-iso路径-of-dev-rdisk-N-bs-1m-rdisk-中加入r可以让写入速度加快" class="headerlink" title="3、写入U盘：sudo dd if=iso路径 of=/dev/rdisk[N] bs=1m  rdisk 中加入r可以让写入速度加快"></a>3、写入U盘：sudo dd if=iso路径 of=/dev/rdisk[N] bs=1m  rdisk 中加入r可以让写入速度加快</h3><h2 id="二、具体操作示例："><a href="#二、具体操作示例：" class="headerlink" title="二、具体操作示例："></a>二、具体操作示例：</h2><ol>
<li>将iso转换成dmg 转iso 用</li>
</ol>
<p>UDRW 替换为 UDTO<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">lapommedeMacBook-Pro:~ lapomme$ sudo hdiutil convert -format UDRW -o /linux.dmg kali.iso</span><br><span class="line">Password:</span><br><span class="line">正在读取Master Boot Record（MBR：0）…</span><br><span class="line">正在读取Kali Live （Apple_ISO：1）…</span><br><span class="line">正在读取（Windows_NTFS_Hidden：2）…</span><br><span class="line">............................................................................</span><br><span class="line">正在读取（DOS_FAT_12：3）…</span><br><span class="line">..............................................................................</span><br><span class="line">已耗时：10.178s</span><br><span class="line">速度：288.3M 字节/秒</span><br><span class="line">节省：0.0%</span><br><span class="line">created: /linux.dmg</span><br></pre></td></tr></table></figure></p>
<ol>
<li><p>查看u盘盘符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">lapommedeMacBook-Pro:~ lapomme$ diskutil list</span><br><span class="line">/dev/disk0 (internal, physical):</span><br><span class="line">#: TYPE NAME SIZE IDENTIFIER</span><br><span class="line">0: GUID_partition_scheme *251.0 GB disk0</span><br><span class="line">1: EFI EFI 209.7 MB disk0s1</span><br><span class="line">2: Apple_CoreStorage Macintosh HD 250.1 GB disk0s2</span><br><span class="line">3: Apple_Boot Recovery HD 650.0 MB disk0s3</span><br><span class="line">/dev/disk1 (internal, virtual):</span><br><span class="line">#: TYPE NAME SIZE IDENTIFIER</span><br><span class="line">0: Apple_HFS Macintosh HD +249.8 GB disk1</span><br><span class="line">Logical Volume on disk0s2</span><br><span class="line">E2BD4617-5A22-46A9-A6F4-D54E3EE92BBC</span><br><span class="line">Unencrypted</span><br><span class="line">/dev/disk2 (external, physical):</span><br><span class="line">#: TYPE NAME SIZE IDENTIFIER</span><br><span class="line">0: FDisk_partition_scheme *62.0 GB disk2</span><br><span class="line">1: DOS_FAT_32 UNTITLED 1 62.0 GB disk2s1</span><br><span class="line">/dev/disk3 (disk image):</span><br><span class="line">#: TYPE NAME SIZE IDENTIFIER</span><br><span class="line">0: FDisk_partition_scheme +3.1 GB disk3</span><br><span class="line">1: 0x17 3.0 GB disk3s1</span><br><span class="line">2: DOS_FAT_12 NO NAME 110.1 MB disk3s2</span><br></pre></td></tr></table></figure>
</li>
<li><p>取消挂载U盘</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lapommedeMacBook-Pro:~ lapomme$ diskutil umountDisk /dev/disk2</span><br><span class="line">Unmount of all volumes on disk2 was successful</span><br></pre></td></tr></table></figure>
</li>
<li><p>用dd命令写入U盘</p>
</li>
</ol>
<p>说明：</p>
<p>（1）sudo dd if=源路径 of=/dev/r卷标 bs=1m ［‘r’ 会让命令执行加快一点］ ［‘bs’为一次填充的容量］</p>
<p>（2）获取映像名称和完整路径可以直接将文件拖入终端，即在终端中显示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lapommedeMacBook-Pro:~ lapomme$ sudo dd if=/linux.dmg of=/dev/rdisk2 bs=1m</span><br><span class="line">2934+1 records in</span><br><span class="line">2934+1 records out</span><br><span class="line">3076767744 bytes transferred in 149.567568 secs (20571089 bytes/sec)</span><br></pre></td></tr></table></figure>
<ol>
<li><p>查看磁盘进度，可以用iostat命令查看磁盘写入状态</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">lapommedeMacBook-Pro:~ lapomme$ iostat -w 2</span><br><span class="line">disk0 disk2 disk3 cpu load average</span><br><span class="line">KB/t tps MB/s KB/t tps MB/s KB/t tps MB/s us sy id 1m 5m 15m</span><br><span class="line">102.71 25 2.49 598.70 0 0.15 24.76 1 0.02 5 4 90 2.04 1.71 1.69</span><br><span class="line">512.00 48 23.93 1024.00 24 23.93 0.00 0 0.00 1 3 96 2.11 1.74 1.69</span><br><span class="line">473.00 26 11.99 1024.00 12 11.98 0.00 0 0.00 3 3 93 2.11 1.74 1.69</span><br><span class="line">491.68 50 23.99 1024.00 24 23.99 0.00 0 0.00 24 8 68 2.11 1.74 1.69</span><br></pre></td></tr></table></figure>
</li>
<li><p>操作完毕后将U盘弹出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lapommedeMacBook-Pro:~ lapomme$ diskutil eject /dev/disk2</span><br><span class="line">Disk /dev/disk2 ejected</span><br></pre></td></tr></table></figure>
</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://www.wulai.me/2017/08/03/CentOS7-Command-line-install-VirtuBox/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Hillock">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="https://avatars2.githubusercontent.com/u/3354580?v=3&s=460">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="无来">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="无来" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/08/03/CentOS7-Command-line-install-VirtuBox/" itemprop="url">
                  CentOS7 Command line install VirtuBox
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-08-03T20:24:12+08:00">
              2017-08-03
            </time>

            &nbsp;|&nbsp;

            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-check-o"></i>
            </span>
            <time title="Post modified" itemprop="dateModified" datetime="2017-08-03T20:44:35+08:00">
              2017-08-03
            </time>
            
          </span>

          

          
            
          

          

          
          

          
          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script src="/assets/js/APlayer.min.js"> </script><h2 id="1-导出OVA-gt-test-ova"><a href="#1-导出OVA-gt-test-ova" class="headerlink" title="1.导出OVA -&gt; test.ova"></a>1.导出OVA -&gt; test.ova</h2><h2 id="2-copy到服务器-amp-导入"><a href="#2-copy到服务器-amp-导入" class="headerlink" title="2.copy到服务器&amp;导入"></a>2.copy到服务器&amp;导入</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost vm] BoxManage import test.ovf</span><br></pre></td></tr></table></figure>
<h2 id="查看虚拟机镜像文件配置信息"><a href="#查看虚拟机镜像文件配置信息" class="headerlink" title="查看虚拟机镜像文件配置信息"></a>查看虚拟机镜像文件配置信息</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost vm]# VBoxManage showvminfo HKAirline</span><br><span class="line">Name:            HKAirline</span><br><span class="line">Groups:          /</span><br><span class="line">Guest OS:        Red Hat (64-bit)</span><br><span class="line">UUID:            041f669d-2974-4322-a046-a55903285424</span><br><span class="line">Config file:     /root/VirtualBox VMs/HKAirline/HKAirline.vbox</span><br><span class="line">Snapshot folder: /root/VirtualBox VMs/HKAirline/Snapshots</span><br><span class="line">Log folder:      /root/VirtualBox VMs/HKAirline/Logs</span><br><span class="line">Hardware UUID:   041f669d-2974-4322-a046-a55903285424</span><br><span class="line">Memory size:     2048MB</span><br><span class="line">Page Fusion:     off</span><br><span class="line">VRAM size:       16MB</span><br><span class="line">CPU exec cap:    100%</span><br><span class="line">HPET:            off</span><br><span class="line">Chipset:         piix3</span><br><span class="line">Firmware:        BIOS</span><br><span class="line">Number of CPUs:  1</span><br><span class="line">PAE:             on</span><br><span class="line">Long Mode:       on</span><br><span class="line">Triple Fault Reset: off</span><br><span class="line">APIC:            on</span><br><span class="line">X2APIC:          on</span><br><span class="line">CPUID Portability Level: 0</span><br><span class="line">CPUID overrides: None</span><br><span class="line">Boot menu mode:  message and menu</span><br><span class="line">Boot Device (1): Floppy</span><br><span class="line">Boot Device (2): DVD</span><br><span class="line">Boot Device (3): HardDisk</span><br><span class="line">Boot Device (4): Not Assigned</span><br><span class="line">ACPI:            on</span><br><span class="line">IOAPIC:          on</span><br><span class="line">BIOS APIC mode:  APIC</span><br><span class="line">Time offset:     0ms</span><br><span class="line">RTC:             UTC</span><br><span class="line">Hardw. virt.ext: on</span><br><span class="line">Nested Paging:   on</span><br><span class="line">Large Pages:     on</span><br><span class="line">VT-x VPID:       on</span><br><span class="line">VT-x unr. exec.: on</span><br><span class="line">Paravirt. Provider: Default</span><br><span class="line">Effective Paravirt. Provider: KVM</span><br><span class="line">State:           powered off (since 2017-08-03T11:27:45.000000000)</span><br><span class="line">Monitor count:   1</span><br><span class="line">3D Acceleration: off</span><br><span class="line">2D Video Acceleration: off</span><br><span class="line">Teleporter Enabled: off</span><br><span class="line">Teleporter Port: 0</span><br><span class="line">Teleporter Address:</span><br><span class="line">Teleporter Password:</span><br><span class="line">Tracing Enabled: off</span><br><span class="line">Allow Tracing to Access VM: off</span><br><span class="line">Tracing Configuration:</span><br><span class="line">Autostart Enabled: off</span><br><span class="line">Autostart Delay: 0</span><br><span class="line">Default Frontend:</span><br><span class="line">Storage Controller Name (0):            IDE</span><br><span class="line">Storage Controller Type (0):            PIIX4</span><br><span class="line">Storage Controller Instance Number (0): 0</span><br><span class="line">Storage Controller Max Port Count (0):  2</span><br><span class="line">Storage Controller Port Count (0):      2</span><br><span class="line">Storage Controller Bootable (0):        on</span><br><span class="line">Storage Controller Name (1):            SATA</span><br><span class="line">Storage Controller Type (1):            IntelAhci</span><br><span class="line">Storage Controller Instance Number (1): 0</span><br><span class="line">Storage Controller Max Port Count (1):  30</span><br><span class="line">Storage Controller Port Count (1):      2</span><br><span class="line">Storage Controller Bootable (1):        on</span><br><span class="line">IDE (1, 0): Empty</span><br><span class="line">SATA (0, 0): /root/VirtualBox VMs/HKAirline/HKAirline-disk001.vmdk (UUID: 6afa88f3-3035-4aa5-a940-f6ec43bc56bb)</span><br><span class="line">NIC 1:           MAC: 0800274D5932, Attachment: Bridged Interface &apos;eth0&apos;, Cable connected: on, Trace: off (file: none), Type: 82540EM, Reported speed: 0 Mbps, Boot priority: 0, Promisc Policy: deny, Bandwidth group: none</span><br><span class="line">NIC 2:           MAC: 0800279B57E7, Attachment: Bridged Interface &apos;eth0&apos;, Cable connected: on, Trace: off (file: none), Type: 82540EM, Reported speed: 0 Mbps, Boot priority: 0, Promisc Policy: deny, Bandwidth group: none</span><br><span class="line">NIC 3:           MAC: 080027716E47, Attachment: Bridged Interface &apos;eth0&apos;, Cable connected: on, Trace: off (file: none), Type: 82540EM, Reported speed: 0 Mbps, Boot priority: 0, Promisc Policy: deny, Bandwidth group: none</span><br><span class="line">NIC 4:           MAC: 080027C363BB, Attachment: Bridged Interface &apos;eth0&apos;, Cable connected: on, Trace: off (file: none), Type: 82540EM, Reported speed: 0 Mbps, Boot priority: 0, Promisc Policy: deny, Bandwidth group: none</span><br><span class="line">NIC 5:           disabled</span><br><span class="line">NIC 6:           disabled</span><br><span class="line">NIC 7:           disabled</span><br><span class="line">NIC 8:           disabled</span><br><span class="line">Pointing Device: PS/2 Mouse</span><br><span class="line">Keyboard Device: PS/2 Keyboard</span><br><span class="line">UART 1:          disabled</span><br><span class="line">UART 2:          disabled</span><br><span class="line">UART 3:          disabled</span><br><span class="line">UART 4:          disabled</span><br><span class="line">LPT 1:           disabled</span><br><span class="line">LPT 2:           disabled</span><br><span class="line">Audio:           enabled (Driver: ALSA, Controller: AC97, Codec: AD1980)</span><br><span class="line">Clipboard Mode:  disabled</span><br><span class="line">Drag and drop Mode: disabled</span><br><span class="line">VRDE:            enabled (Address 0.0.0.0, Ports 3389, MultiConn: off, ReuseSingleConn: off, Authentication type: external)</span><br><span class="line">Video redirection: disabled</span><br><span class="line">VRDE property: TCP/Ports  = &quot;3389&quot;</span><br><span class="line">VRDE property: TCP/Address = &lt;not set&gt;</span><br><span class="line">VRDE property: VideoChannel/Enabled = &lt;not set&gt;</span><br><span class="line">VRDE property: VideoChannel/Quality = &lt;not set&gt;</span><br><span class="line">VRDE property: VideoChannel/DownscaleProtection = &lt;not set&gt;</span><br><span class="line">VRDE property: Client/DisableDisplay = &lt;not set&gt;</span><br><span class="line">VRDE property: Client/DisableInput = &lt;not set&gt;</span><br><span class="line">VRDE property: Client/DisableAudio = &lt;not set&gt;</span><br><span class="line">VRDE property: Client/DisableUSB = &lt;not set&gt;</span><br><span class="line">VRDE property: Client/DisableClipboard = &lt;not set&gt;</span><br><span class="line">VRDE property: Client/DisableUpstreamAudio = &lt;not set&gt;</span><br><span class="line">VRDE property: Client/DisableRDPDR = &lt;not set&gt;</span><br><span class="line">VRDE property: H3DRedirect/Enabled = &lt;not set&gt;</span><br><span class="line">VRDE property: Security/Method = &lt;not set&gt;</span><br><span class="line">VRDE property: Security/ServerCertificate = &lt;not set&gt;</span><br><span class="line">VRDE property: Security/ServerPrivateKey = &lt;not set&gt;</span><br><span class="line">VRDE property: Security/CACertificate = &lt;not set&gt;</span><br><span class="line">VRDE property: Audio/RateCorrectionMode = &lt;not set&gt;</span><br><span class="line">VRDE property: Audio/LogPath = &lt;not set&gt;</span><br><span class="line">USB:             enabled</span><br><span class="line">EHCI:            disabled</span><br><span class="line">XHCI:            disabled</span><br><span class="line"></span><br><span class="line">USB Device Filters:</span><br><span class="line"></span><br><span class="line">&lt;none&gt;</span><br><span class="line"></span><br><span class="line">Bandwidth groups:  &lt;none&gt;</span><br><span class="line"></span><br><span class="line">Shared folders:  &lt;none&gt;</span><br><span class="line"></span><br><span class="line">Video capturing:    not active</span><br><span class="line">Capture screens:    0</span><br><span class="line">Capture file:       /root/VirtualBox VMs/HKAirline/HKAirline.webm</span><br><span class="line">Capture dimensions: 1024x768</span><br><span class="line">Capture rate:       512 kbps</span><br><span class="line">Capture FPS:        25</span><br><span class="line"></span><br><span class="line">Guest:</span><br><span class="line"></span><br><span class="line">Configured memory balloon size:      0 MB</span><br></pre></td></tr></table></figure>
<h2 id="3-检查服务器的网卡名称"><a href="#3-检查服务器的网卡名称" class="headerlink" title="3.检查服务器的网卡名称"></a>3.检查服务器的网卡名称</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost var]# ifconfig</span><br><span class="line">enp3s0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 11.0.0.30  netmask 255.255.255.0  broadcast 11.0.0.255</span><br><span class="line">        inet6 fe80::7627:eaff:fe0b:cbdd  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 74:27:ea:0b:cb:dd  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 1176518  bytes 1473593219 (1.3 GiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 629933  bytes 45138166 (43.0 MiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</span><br><span class="line">        loop  txqueuelen 0  (Local Loopback)</span><br><span class="line">        RX packets 83  bytes 7928 (7.7 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 83  bytes 7928 (7.7 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure>
<h2 id="5-启动网卡配置"><a href="#5-启动网卡配置" class="headerlink" title="5. 启动网卡配置"></a>5. 启动网卡配置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/lib/virtualbox/vboxdrv.sh setup</span><br></pre></td></tr></table></figure>
<h3 id="5-1-安装内核"><a href="#5-1-安装内核" class="headerlink" title="5.1 安装内核"></a>5.1 安装内核</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# yum install kernel-headers-$(uname -r)</span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line"> * base: mirror.bit.edu.cn</span><br><span class="line"> * epel: mirrors.tuna.tsinghua.edu.cn</span><br><span class="line"> * extras: mirrors.btte.net</span><br><span class="line"> * updates: mirror.bit.edu.cn</span><br><span class="line">No package kernel-headers-3.10.0-327.el7.x86_64 available.</span><br><span class="line">Error: Nothing to do</span><br></pre></td></tr></table></figure>
<h3 id="5-2-查看内核"><a href="#5-2-查看内核" class="headerlink" title="5.2 查看内核"></a>5.2 查看内核</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# uname -a</span><br><span class="line">Linux localhost.localdomain 3.10.0-327.el7.x86_64 #1 SMP Thu Nov 19 22:10:57 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux</span><br></pre></td></tr></table></figure>
<h3 id="5-3-下载匹配内核"><a href="#5-3-下载匹配内核" class="headerlink" title="5.3 下载匹配内核"></a>5.3 下载匹配内核</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# wget ftp://ftp.pbone.net/mirror/ftp.scientificlinux.org/linux/scientific/7.0/x86_64/updates/security/kernel-devel-3.10.0-</span><br><span class="line">327.el7.x86_64.rpm</span><br><span class="line">--2017-08-03 09:00:48--  ftp://ftp.pbone.net/mirror/ftp.scientificlinux.org/linux/scientific/7.0/x86_64/updates/security/kernel-devel-3.10.0-327.el7.x86_64.rpm</span><br><span class="line">           =&gt; ‘kernel-devel-3.10.0-327.el7.x86_64.rpm.1’</span><br><span class="line">Resolving ftp.pbone.net (ftp.pbone.net)... 85.14.85.4</span><br><span class="line">Connecting to ftp.pbone.net (ftp.pbone.net)|85.14.85.4|:21... connected.</span><br><span class="line">Logging in as anonymous ... Logged in!</span><br><span class="line">==&gt; SYST ... done.    ==&gt; PWD ... done.</span><br><span class="line">==&gt; TYPE I ... done.  ==&gt; CWD (1) /mirror/ftp.scientificlinux.org/linux/scientific/7.0/x86_64/updates/security ... done.</span><br><span class="line">==&gt; SIZE kernel-devel-3.10.0-327.el7.x86_64.rpm ... 11470260</span><br><span class="line">==&gt; PASV ... done.    ==&gt; RETR kernel-devel-3.10.0-327.el7.x86_64.rpm ... done.</span><br><span class="line">Length: 11470260 (11M) (unauthoritative)</span><br><span class="line"></span><br><span class="line">100%[====================================================================================================&gt;] 11,470,260   603KB/s   in 28s    </span><br><span class="line"></span><br><span class="line">2017-08-03 09:01:21 (406 KB/s) - ‘kernel-devel-3.10.0-327.el7.x86_64.rpm’ saved [11470260]</span><br></pre></td></tr></table></figure>
<h4 id="安装依赖包"><a href="#安装依赖包" class="headerlink" title="安装依赖包"></a>安装依赖包</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install make gcc libpcap libpcap-devel -y</span><br></pre></td></tr></table></figure>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>通过如下命令直接安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh kernel-devel-3.10.0-327.el7.x86_64.rpm</span><br></pre></td></tr></table></figure></p>
<p>如果系统已经安装了较高版本的内核头文件，则需要通过如下命令实现降级：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh --oldpackage kernel-devel-3.10.0-327.el7.x86_64.rpm</span><br></pre></td></tr></table></figure></p>
<h2 id="查看Bradge接口"><a href="#查看Bradge接口" class="headerlink" title="查看Bradge接口"></a>查看Bradge接口</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost vm]# VBoxManage list bridgedifs</span><br><span class="line">Name:            enp3s0</span><br><span class="line">GUID:            33706e65-3073-4000-8000-7427ea0bcbdd</span><br><span class="line">DHCP:            Disabled</span><br><span class="line">IPAddress:       11.0.0.30</span><br><span class="line">NetworkMask:     255.255.255.0</span><br><span class="line">IPV6Address:     fe80:0000:0000:0000:7627:eaff:fe0b:cbdd</span><br><span class="line">IPV6NetworkMaskPrefixLength: 64</span><br><span class="line">HardwareAddress: 74:27:ea:0b:cb:dd</span><br><span class="line">MediumType:      Ethernet</span><br><span class="line">Status:          Up</span><br><span class="line">VBoxNetworkName: HostInterfaceNetworking-enp3s0</span><br></pre></td></tr></table></figure>
<h3 id="修改网卡设备的名称"><a href="#修改网卡设备的名称" class="headerlink" title="修改网卡设备的名称"></a>修改网卡设备的名称</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost vm]# VBoxManage modifyvm HKAirline --bridgeadapter4 enp3s0</span><br></pre></td></tr></table></figure>
<h3 id="启动虚拟机"><a href="#启动虚拟机" class="headerlink" title="启动虚拟机"></a>启动虚拟机</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">VBoxManage startvm HKAirline --type headless</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://avatars2.githubusercontent.com/u/3354580?v=3&s=460"
               alt="Hillock" />
          <p class="site-author-name" itemprop="name">Hillock</p>
          <p class="site-description motion-element" itemprop="description">开发笔记而已～～～</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">131</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/liuhill" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/LiuLig" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/liuhill" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hillock</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	




  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
      search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();
    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';
      $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = $( "entry", xmlResponse ).map(function() {
            return {
              title: $( "title", this ).text(),
              content: $("content",this).text(),
              url: $( "url" , this).text()
            };
          }).get();
          var $input = document.getElementById(search_id);
          var $resultContent = document.getElementById(content_id);
          $input.addEventListener('input', function(){
            var matchcounts = 0;
            var str='<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length > 1) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var content_index = [];
                var data_title = data.title.trim().toLowerCase();
                var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                var data_url = decodeURIComponent(data.url);
                var index_title = -1;
                var index_content = -1;
                var first_occur = -1;
                // only match artiles with not empty titles and contents
                if(data_title != '') {
                  keywords.forEach(function(keyword, i) {
                    index_title = data_title.indexOf(keyword);
                    index_content = data_content.indexOf(keyword);
                    if( index_title >= 0 || index_content >= 0 ){
                      isMatch = true;
                      if (i == 0) {
                        first_occur = index_content;
                      }
                    }

                  });
                }
                // show search results
                if (isMatch) {
                  matchcounts += 1;
                  str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                  var content = data.content.trim().replace(/<[^>]+>/g,"");
                  if (first_occur >= 0) {
                    // cut out 100 characters
                    var start = first_occur - 20;
                    var end = first_occur + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if(start == 0){
                      end = 50;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    var match_content = content.substring(start, end);
                    // highlight all keywords
                    keywords.forEach(function(keyword){
                      var regS = new RegExp(keyword, "gi");
                      match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                    });

                    str += "<p class=\"search-result\">" + match_content +"...</p>"
                  }
                  str += "</li>";
                }
              })};
            str += "</ul>";
            if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
            if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
            $resultContent.innerHTML = str;
          });
          proceedsearch();
        }
      });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  

  

  

  


</body>
</html>
